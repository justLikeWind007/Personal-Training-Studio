# 告警规则模板 v1（Prometheus）

## 1. 文件位置

- `observability/prometheus-alert-rules.yml`

## 2. 规则说明

当前模板包含以下告警：
- `PtstudioGatewayHigh5xxRate`
  - 阈值：5xx 比例 > 1% 持续 5 分钟
- `PtstudioGatewayHighP95Latency`
  - 阈值：P95 > 800ms 持续 5 分钟
- `PtstudioServiceInstanceDown`
  - 阈值：实例 `up==0` 持续 2 分钟
- `PtstudioJvmThreadSpike`
  - 阈值：JVM live threads > 400 持续 5 分钟

## 3. 使用建议

- 根据实际集群规模与峰值流量调整阈值。
- `application` 与 `job` 标签名可能受抓取配置影响，接入时请核对实际 labels。
- 建议结合 Alertmanager 路由策略按 `severity/service` 进行分级通知。

## 4. 与观测基线关系

- 该模板与 `docs/生产观测与告警基线_v1.md` 的阈值保持一致。
- 建议在 `stage` 环境先做告警演练，再推广到 `prod`。
