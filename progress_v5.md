# PRD v5.0 对应进度清单

基准文档：
- `docs/PRD_企业级私教工作室管理系统_发布版_v5.0.md`

更新时间：2026-02-23

## v5.0 总目标
- [x] 服务注册中心与网关
- [x] Biz/Ops 微服务拆分
- [x] 集群启动/停止/冒烟脚本
- [x] 高并发链路压测脚本
- [x] Sentinel 流控与Nacos动态规则脚本
- [x] 中间件集群拓扑与冒烟脚本
- [x] 可观测性与告警基线
- [x] 发布与回滚基线
- [x] 故障演练基线

## User Stories 映射

### US-301 微服务基础设施
- [x] Nacos 注册中心
- [x] Gateway 网关
- [x] 路由规则配置
- [x] 健康检查端点

### US-302 业务服务拆分
- [x] Biz Service 启动模块
- [x] Ops Service 启动模块
- [x] 控制器路径拆分
- [x] 服务注册配置

### US-303 集群运维脚本
- [x] 集群启动脚本
- [x] 集群关闭脚本
- [x] 网关冒烟脚本
- [x] 运行日志与PID管理

### US-304 高并发链路测试
- [x] 并发入队压测
- [x] 指标统计（RPS/P95/失败率）
- [x] 队列消费闭环验证
- [x] 网关链路压测脚本化

### US-305 动态流控与降级
- [x] 网关接入Sentinel
- [x] Biz/Ops接入Sentinel
- [x] Nacos动态下发规则脚本
- [x] 压测统计补充限流计数
- [x] 限流前后对比报告脚本

### US-306 中间件集群化演进
- [x] Nacos集群拓扑（含外置MySQL）
- [x] Redis主从+Sentinel拓扑
- [x] RocketMQ多NameServer拓扑
- [x] ES三节点拓扑与集群冒烟脚本

### US-307 可观测性与告警基线
- [x] 统一日志追踪字段
- [x] health/metrics/prometheus 端点暴露
- [x] 可观测性巡检脚本
- [x] 告警基线文档
- [x] Prometheus 告警规则模板

### US-308 发布与回滚基线
- [x] 发布前检查脚本
- [x] 灰度发布 Runbook
- [x] 回滚 Runbook
- [x] 发布检查清单模板

### US-309 故障演练基线
- [x] Redis Sentinel 主从切换演练脚本
- [x] 故障演练手册
- [x] 演练记录模板
- [x] 本地集群演练入口

## 验收里程碑
- [x] M5-1：注册中心 + 网关
- [x] M5-2：Biz/Ops 服务拆分
- [x] M5-3：集群脚本与冒烟
- [x] M5-4：高并发测试基线
- [x] M5-5：Sentinel 动态流控
- [x] M5-6：中间件集群拓扑与冒烟
- [x] M5-7：可观测性与告警基线
- [x] M5-8：告警规则模板
- [x] M5-9：发布与回滚基线
- [x] M5-10：故障演练基线
