spring:
  application:
    name: ptstudio-cloud-gateway
  cloud:
    nacos:
      discovery:
        server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}
    gateway:
      routes:
        - id: ptstudio-ops-service
          uri: lb://ptstudio-ops-service
          predicates:
            - Path=/api/ops/**
        - id: ptstudio-biz-service
          uri: lb://ptstudio-biz-service
          predicates:
            - Path=/api/**,/v3/api-docs/**,/swagger-ui/**
    sentinel:
      transport:
        dashboard: ${SENTINEL_DASHBOARD:127.0.0.1:8718}
        port: ${SENTINEL_TRANSPORT_PORT:8719}
      datasource:
        gw-flow:
          nacos:
            server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}
            group-id: SENTINEL_GROUP
            data-id: ptstudio-cloud-gateway-gw-flow-rules
            data-type: json
            rule-type: gw-flow

server:
  port: ${SERVER_PORT:8080}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      probes:
        enabled: true

logging:
  pattern:
    level: "%5p [traceId:%X{traceId:-} requestId:%X{requestId:-} tenantId:%X{tenantId:-} storeId:%X{storeId:-}]"
